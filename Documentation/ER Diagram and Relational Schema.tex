%1) Relation complaint between customer and order and service employee
%2) Relation between order and customer (delivers)

\documentclass[12pt]{report}

\usepackage[utf8]{inputenc}
\usepackage{amsfonts}
\usepackage{graphicx}
\usepackage{amsmath}
\usepackage{geometry}

\graphicspath{..\ER Diagram}

\title{
    \textbf{Database Design for Online Retail Store\\ Winter 2022 \\}
}

\author{Abhimanyu Bhatnagar, 2020273
        \\Madhava Krishna, 2020217
        \\Ritika Nagar, 2020112
        \\Atyant Sony, 2020039}
\date{\textit{\today}}



\begin{document}
    \maketitle
    
    \tableofcontents
    \listoffigures
    \pagebreak

    %chapter 1, defining the problem
    \chapter{Defining the Problem}
    \section{Objective}
        The goal is to design a database management system for an online retail store,
        similar to Big Bazaar, Flipkart and Amazon. Our project models on Grofers (now BlinkIt), 
        a fast grocery marketplace for consumers to purchase day-to-day goods from.
    
    \section{Problem Statement}
    The ER diagrams and the relational schema that follow are based on the following (rudimentary) problem statement:
    \\\\
    %Problem statement
    \textit{
        The online retail store serves many customers. 
        The customers are required to hold an account on the platofrm to be able to purchase items.
        They can create an account by specifying their name, email address, phone number, and address.
        Customers add products to a shopping cart. They apply coupons on the shopping cart; the coupons 
        have a coupon code and an associated discount percentage.\\
        Customers order items by checking out the items on their shopping cart. The order is placed once the
         transaction is confirmed. The order is delivered to the customer only, 
         they cannot have the order delivered to other addresses.
        \\
        A product can belong to various categories and has specifications and a cost. Each
        product is obtained from a vendor which the store transacts with. After being purchased from 
        the vendor, the products are stored in a warehouse. Warehouse employees are responsible for packing 
        and preparing orders. The readied order is then delivered to the customer by a delivery agent.
        \\
        In case of any lapses with an order, the customer complains to support staff who create a complaint
        number against the order. They send out the details regarding the complaint to the customer.
    }

    \section{Stakeholders}
    Notable stakeholders of this problem include:
    \begin{enumerate}
        \item Customer
        \item Employees
        \item Suppliers
        \item Vendors
    \end{enumerate}
    Other stakeholders include manufacturers, warehousing service providers
    
    \section{Assumptions}
    \begin{enumerate}
        \item The retail store would be operated in India only. Therefore, there isn't an option to change the country.
        \item There will be a shopping cart associated with the customer's account. They won't be able to add item to cart without being logged in.
        \item The delivery would be taken care of by the company itself; items will be shipped from one warehouse only (Similar to Blinkit, erstwhile Grofers).
        \item Coupons would be applied on the order, not the cart. Coupon would be applied during the checkout process.
        \item Coupons would be applied using the coupon code, which is a unique alphanumeric value. A coupon cannot be reused.
        \item Employees will be divided into delivery partners (responsible for delivering the order), warehouse workers (tasked with preparation of orders) and service employees (responsible for conflict resolution).
        \item Vendors have only one account number and will be based only in India.
        \item Employees have only one email address.
        \item There won't be any wishlisting features, nor any saved-items feature like the ones offered by Amazon.
        \item Employees' performance would be graded 'Excellent', 'Good', 'Average', 'Below Average', 'Poor'.
    \end{enumerate}



    \chapter{ER Diagram}
    \section{Entities}

    \begin{enumerate}
        \item Customer
            \begin{enumerate}
                \item \underline{Customer ID}: Primary key
                \item Phone Number: Multivalued
                \item Name: composite
                    \begin{enumerate}
                        \item First Name
                        \item Last Name
                    \end{enumerate}
                \item Address: composite
                    \begin{enumerate}
                        \item House Number
                        \item Locality
                        \item City
                        \item State
                        \item Pin Code
                    \end{enumerate}
                \item Email Address
                \item Password
            \end{enumerate}
        \item Product
            \begin{enumerate}
                \item \underline{Product ID}: Primary key
                \item Specifications
                    \begin{enumerate}
                        \item Expiry date
                        \item Manufacture date
                        \item Country of manufacture
                        \item Weight 
                        \item Dimensions
                    \end{enumerate}
                \item Price
                \item Category
                \item Discount Percentage
                \item GST
                \item Rating : Multivalued
                \item Photos: Multivalued
            \end{enumerate}
        \item Orders
            \begin{enumerate}
                \item \underline{Order ID}
                \item Cost of products
                \item Taxes
                \item Discount Percentage
            \end{enumerate}
        \item Vendor
            \begin{enumerate}
                \item \underline{Vendor ID}
                \item Address
                    \begin{enumerate}
                        \item Plot number
                        \item City
                        \item State
                        \item Pin code
                    \end{enumerate}
                \item Name
                \item Phone number
            \end{enumerate}
        \item Coupon
            \begin{enumerate}
                \item \underline{Coupon Code}: Primary key
                \item Discount Percentage
                \item Validity
            \end{enumerate}
        \item Warehouse
            \begin{enumerate}
                \item \underline{Warehouse ID}
                \item Address: composite
                    \begin{enumerate}
                        \item Plot number
                        \item City
                        \item State
                        \item Pin Code
                    \end{enumerate}
                \item Telephone Number: multivalued
            \end{enumerate}
        \item Employee:
            \begin{enumerate}
                \item \underline{Employee ID}: Primary key
                \item Date of Joining
                \item Position
                \item Department
                \item Email Address
                \item Name: composite
                    \begin{enumerate}
                        \item First Name
                        \item Last Name
                    \end{enumerate}
                \item Residential Address: composite
                    \begin{enumerate}
                        \item House number
                        \item Locality
                        \item City
                        \item State
                        \item Pin Code
                    \end{enumerate}
                \item Date of Joining
                \item Performance
                \item Salary
                \item Gender
                \item Date of Birth
                \item Age : derived
            \end{enumerate}
            Employees can be specialised into:
            \begin{itemize}
                \item Delivery Partner:
                    \begin{enumerate}
                        \item Vehicle ID
                        \item Vehicle Type
                    \end{enumerate}
                \item Warehouse Worker: no additional attributes
                \item Service Employee: no additional attributes
            \end{itemize}
        \item Shopping Cart (Weak entity)
            \begin{enumerate}
                \item \underline{Customer ID,Product ID}: Primary Key
                \item Customer ID: Foreign Key (references Customer)
                \item Product ID: Foreign Key (references Product)
                \item Quantity
                \item Total cost: Derived attribute

            \end{enumerate}
        
    \end{enumerate}


    \section{Relations}
        \begin{enumerate}
             \item Supplies
            \begin{enumerate}
                \item \underline{Vendor ID, Product ID}: Primary Key
                \item Vendor ID: Foreign Key (references Vendor)
                \item Product ID: Foreign Key (references Product)
                \item Quantity
            \end{enumerate}
            \item Order Product
            \begin{enumerate}
                \item \underline{Order ID, Product ID}: Primary Key 
                \item Order ID: Foreign Key (references Order)
                \item Product ID: Foreign Key (references Product)
                \item Quantity
            \end{enumerate}
            \item Stores
            \begin{enumerate}
                \item \underline{Warehouse ID, Product ID}: Primary Key
                \item Warehouse ID: Foreign Key (references Warehouse)
                \item Product ID: Foreign Key (references Product)
                \item Stocks
            \end{enumerate}
            \item Delivery
            \begin{enumerate}
                \item \underline{Order ID}: Primary Key
                \item Order ID: Foreign Key (references Order)
                \item Employee ID: Foreign Key (references Employee)
                \item Customer ID: Foreign Key (references Customer)
                \item Warehouse ID: Foreign Key (references Warehouse)
            \end{enumerate}
            \item Transaction
            \begin{enumerate}
                \item \underline{Order ID}: Primary Key
                \item Customer ID: Foreign Key (references Customer)
                \item Payment Method
                \item Transaction Status
                \item Transaction Time
                \item Coupon Code: Foreign Key (references Coupon)
            \end{enumerate}
            \item Complains
            \begin{enumerate}
                \item \underline {Complaint Number}: Primary Key
                \item Customer ID: Foreign Key (references Customer)
                \item Order ID: Foreign Key (references Order)
                \item Service Employee ID: Foreign Key (references Employee)
            \end{enumerate}
        \end{enumerate}
    \
\end{document}